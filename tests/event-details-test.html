<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll to Fix Header</title>

    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="event-details.css">

</head>
<body>
    <header id="header">
        <div class="navbar">
            <a class="logo" href="home.html">UniVerse</a>
            <div>
                <nav id="nav-items">
                    <a class="nav-item" id="home-nav" href="home.html">Home</a>
                    <a class="nav-item active" id="events-nav" href="#">Events</a>
                    <a class="nav-item" id="about-nav" href="#">About</a>
                    <a class="nav-item" id="contact-nav" href="#">Contact</a>
                </nav>
            </div>
        </div>
    </header>

    <main id="main">
        <img src="../assets/events/freashmanorientation.jpg">
    </main>

    <script>

        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function changeNavbarItemsColor(color) {
            let navBar = document.getElementById("nav-items");

            navBar.querySelectorAll("*").forEach(child=> {
                if (!child.classList.contains("active")) {
                    child.style.color = color;
                }
            })
        }

        function changeLogoColor(color) {
            document.getElementsByClassName("logo")[0].style.color = color;
        }

        // Get elements
        const header = document.getElementById("header");
        const main = document.getElementById("main");

        // Listen to scroll event
        window.addEventListener('scroll', async () => {
            console.log(`ScrollY offset: ${window.scrollY}`);

            // When scrolling down
            if (window.scrollY > 0) {

                if (window.scrollY >= 20) {
                    changeNavbarItemsColor("#efefef");

                    changeLogoColor("white");
                }

                // Shrink the main element's height as we scroll down
                main.classList.add("shrinking"); // Apply shrinking height animation
                header.classList.add("fixedHeader"); // Fix the header at the top
                await delay(500);
            } else {
                changeNavbarItemsColor("#2E2B3A");
                changeLogoColor("#2E2B3A");
                // When scrolling back to the top, restore the main element's height
                main.classList.remove("shrinking"); // Remove shrinking height animation
                header.classList.remove("fixedHeader"); // Remove fixed header
            }

            // Actual tested values - diff header elements with diff heigh require different offsets
            if (window.scrollY >= 200) {
                document.getElementsByClassName("navbar")[0].classList.add("removePadding")
                header.classList.add("addCoverImg")
            } else {
                document.getElementsByClassName("navbar")[0].classList.remove("removePadding")
                header.classList.remove("addCoverImg")
            }
        });
    </script>
</body>
</html>
